<h3>スケジュール管理アプリ</h3>

<p><%= link_to "新規追加", :new_post %></p>
<p>予定一覧</p>

<% if flash[:notice] %>
    <p class="notice"><%= flash[:notice] %></p>
    <% end %>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>開始日</th>
      <th>終了日</th>
      <th>終日</th>
      <th>更新日時</th>
    </tr>
  </thead>

  <tbody>
    <%count = 0%>
    <% @posts.each do |post| %>
      <tr>
        <td><%= post.id %></td>
        <td><%= post.title %></td>
        <td><%= post.begin %></td>
        <td><%= post.end %></td>
         <td><%= post.allday %></td>
        <td><%= post.updated_at.to_s(:datetime_jp) %></td>
        <td><%= link_to "詳細", post %></td>
        <td><%= link_to "編集", [:edit, post] %></td>
        <td><%= link_to "削除", post, method: :delete, data: { confirm: "スケジュールを削除しますか？この操作は取り消せません" } %></td>
      </tr>
      <%count += 1%>
    <% end %>
    <p>予定の合計数：<%= count %></p>
    <p>本日の日付：<span id = "text"></span></p>

    <script>
        var today = new Date();
        var year = today.getFullYear();
        var month = today.getMonth()+1;
        var day = today.getDate();
        document.getElementById("text").textContent = `${year}年${month}月${day}日`;
    </script>
  </tbody>
</table>

<%
=begin %>
<%# コンポーネントを追加 bootstrap動いてるかの確認用%>
<div class="alert alert-primary" role="alert">
  A simple primary alert—check it out!
</div>
<%
=end %>


